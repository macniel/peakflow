<!DOCTYPE <!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Newt</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="./resources/main.css" />
    <script src="http://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.34/dist/web3.min.js"></script>
    <script type="module" src="./resources/main.mjs"></script>

</head>
<body>
    <main-app></main-app>

    <fieldset>
        <legend>Register Patient with System</legend>
        Name: <input id="addPatientName"><br/>
        Addresse: <input id="addPatient"><button onclick="registerPatient()">Register</button>
    </fieldset>

    <fieldset>
        <legend>Wallet Adress</legend>
    <input id="wallet"><button onclick="setWallet()">set Wallet Adress</button>
    </fieldset>
    <script>
        registerPatient = () => {
            console.log('called registerPatient');
            if ( document.getElementById('addPatient').value != '' ) {
                return fetch('./api/register', 
                {
                    method: 'POST', 
                    body: JSON.stringify({
                        address: document.getElementById('addPatient').value,
                        name: document.getElementById('addPatientName').value
                    }),
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    }
                }).then(response => response.json()).then(response => console.log);
            }
        }
    </script>
    <script>
    
        setWallet = () => {
            if ( document.getElementById('wallet').value != '' ) {
                document.querySelector('main-app').setAttribute('wallet', document.getElementById('wallet').value);
            }
        }

    </script>
</body>
</html>